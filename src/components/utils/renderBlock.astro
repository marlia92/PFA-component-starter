---
type Section = {
  _component: string;
  [key: string]: any;
};

const { contentSections = [], propName = "" } = Astro.props;

// Manually import your components (flattened paths, one level deep)
import Hero from "../page-sections/hero-split.astro";
import RichText from "../page-sections/rich-text.astro";
import FestivalList from "../page-sections/festival-list.astro";
import CTA from "../page-sections/cta.astro";

// Map component name to imported component
const componentsMap: Record<string, any> = {
  "page-sections/hero-split": HeroSplit,
  "page-sections/rich-text": RichText,
  "page-sections/festival-list": FestivalList,
  "page-sections/cta": CTA,
};
---

{contentSections.map((section: Section) => {
  const Component = componentsMap[section._component];
  if (!Component) {
    return <div>Component "{section._component}" not found.</div>;
  }
  return <Component {...section} />;
})}
