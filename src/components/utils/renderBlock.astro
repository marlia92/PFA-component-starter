---
type Section = {
  _component: string;
  [key: string]: any;
};

const { contentSections = [], propName = "" } = Astro.props;

// Manually import your components (flattened paths, one level deep)
import HeroSplit from "../page-sections/heroes/hero-split/HeroSplit.astro";
import Text from "../building-blocks/core-elements/text/Text.astro";
import FestivalList from "../page-sections/festival-list.astro";
import CtaForm from "../page-sections/ctas/cta-form/CtaForm.astro";

// Map component name to imported component
const componentsMap: Record<string, any> = {
  "page-sections/heroes/hero-split": HeroSplit,
  "core-elements/text": Text,
  "page-sections/festival-list": FestivalList,
  "page-sections/ctas/cta-form": CtaForm,
};
---

{contentSections.map((section: Section) => {
  const Component = componentsMap[section._component];
  if (!Component) {
    return <div>Component "{section._component}" not found.</div>;
  }
  return <Component {...section} />;
})}
